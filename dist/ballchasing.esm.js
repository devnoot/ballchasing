import r from"node-fetch";import*as e from"fs";function t(){return(t=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r}).apply(this,arguments)}var a="object"==typeof self?self.FormData:window.FormData,s=Object.assign(Object.create(null),a,{default:a});function o(r,e){try{var t=r()}catch(r){return e(r)}return t&&t.then?t.then(void 0,e):t}var n=function(){function a(r){this._apiKey=r,this._baseURL=new URL("https://ballchasing.com/api")}var n=a.prototype;return n.authHeaders=function(){return{Authorization:this._apiKey}},n.request=function(e,a,s){try{var n=this;return Promise.resolve(o(function(){var o=t({headers:t({},n.authHeaders(),s)},a);return Promise.resolve(r(e,o)).then(function(r){return Promise.resolve(r.json()).then(function(e){return{response:r,data:e}})})},function(r){throw new Error(r)}))}catch(r){return Promise.reject(r)}},n.ping=function(){try{var r=this;return Promise.resolve(o(function(){return Promise.resolve(r.request(r._baseURL))},function(r){throw r}))}catch(r){return Promise.reject(r)}},n.uploadReplay=function(r,t,a){try{var n=this;return Promise.resolve(o(function(){var o=new URL("/api/v2/upload",n._baseURL);a&&o.searchParams.set("visibility",a),t&&o.searchParams.set("group",t);var i=e.statSync(r),c=e.createReadStream(r),u=new s;return u.append("file",c,{knownLength:i.size}),Promise.resolve(n.request(o,{method:"POST",body:u}))},function(r){throw r}))}catch(r){return Promise.reject(r)}},n.getMaps=function(){try{var r=this;return Promise.resolve(o(function(){var e=new URL("/api/maps",r._baseURL);return Promise.resolve(r.request(e))},function(r){throw r}))}catch(r){return Promise.reject(r)}},n.listReplays=function(r){try{var e=this;return Promise.resolve(o(function(){var t=new URL("/api/replays",e._baseURL);return r.title&&t.searchParams.set("title",r.title),r.playerName&&t.searchParams.set("player-name",r.playerName),r.playerId&&t.searchParams.set("player-id",r.playerId),r.playlist&&t.searchParams.set("playlist",r.playlist),r.season&&t.searchParams.set("season",r.season),r.matchResult&&t.searchParams.set("match-result",r.matchResult),r.minRank&&t.searchParams.set("min-rank",r.minRank),r.maxRank&&t.searchParams.set("max-rank",r.maxRank),r.pro&&t.searchParams.set("pro","true"),r.uploader&&t.searchParams.set("uploader",r.uploader),r.group&&t.searchParams.set("group",r.group),r.map&&t.searchParams.set("map",r.map),r.createdBefore&&t.searchParams.set("created-before",r.createdBefore),r.createdAfter&&t.searchParams.set("created-after",r.createdAfter),r.replayDateBefore&&t.searchParams.set("replay-date-before",r.replayDateBefore),r.replayDateAfter&&t.searchParams.set("replay-date-after",r.replayDateAfter),r.count&&t.searchParams.set("count",r.count.toString()),r.sortDir&&t.searchParams.set("sort-dir",r.sortDir),r.sortBy&&t.searchParams.set("sort-by",r.sortBy),Promise.resolve(e.request(t))},function(r){throw r}))}catch(r){return Promise.reject(r)}},n.getReplay=function(r){try{var e=this;return Promise.resolve(o(function(){var t=new URL("/api/replays/"+r.id,e._baseURL);return Promise.resolve(e.request(t))},function(r){throw new Error(r)}))}catch(r){return Promise.reject(r)}},n.patchReplay=function(r){var e=r.id,a=r.patch;try{var s=this;return Promise.resolve(o(function(){var r=new URL("/api/replays/"+e,s._baseURL);return Promise.resolve(s.request(r,{method:"PATCH",body:JSON.stringify(t({},a))},{"Content-Type":"application/json"}))},function(r){throw new Error(r)}))}catch(r){return Promise.reject(r)}},n.deleteReplay=function(r){try{var e=this;return Promise.resolve(o(function(){var t=new URL("/api/replays/"+r.id,e._baseURL);return Promise.resolve(e.request(t,{method:"DELETE"}))},function(r){throw new Error(r)}))}catch(r){return Promise.reject(r)}},n.downloadReplay=function(e){try{var a=this;return Promise.resolve(o(function(){var s=new URL("/api/replays/"+e.id+"/file",a._baseURL);return Promise.resolve(r(s,{headers:t({},a.authHeaders())}))},function(r){throw new Error(r)}))}catch(r){return Promise.reject(r)}},n.createGroup=function(r){try{var e=this;return Promise.resolve(o(function(){var a=new URL("/api/groups",e._baseURL);return Promise.resolve(e.request(a,{method:"POST",body:JSON.stringify(t({},r))},{"Content-Type":"application/json"}))},function(r){throw new Error(r)}))}catch(r){return Promise.reject(r)}},n.listGroups=function(r){void 0===r&&(r={});try{var e=this;return Promise.resolve(o(function(){var t=new URL("/api/groups",e._baseURL);return r.name&&t.searchParams.set("name",r.name),r.count&&t.searchParams.set("count",r.count.toString()),r.creator&&t.searchParams.set("creator",r.creator),r.createdBefore&&t.searchParams.set("created-before",r.createdBefore),r.createdAfter&&t.searchParams.set("created-after",r.createdAfter),r.sortBy&&t.searchParams.set("sort-by",r.sortBy),r.sortDir&&t.searchParams.set("sort-dir",r.sortDir),r.group&&t.searchParams.set("group",r.group),Promise.resolve(e.request(t))},function(r){throw new Error(r)}))}catch(r){return Promise.reject(r)}},n.getGroup=function(r){try{var e=this;return Promise.resolve(o(function(){var t=new URL("/api/groups/"+r.id,e._baseURL);return Promise.resolve(e.request(t))},function(r){throw new Error(r)}))}catch(r){return Promise.reject(r)}},n.deleteGroup=function(r){try{var e=this;return Promise.resolve(o(function(){var t=new URL("/api/groups/"+r.id,e._baseURL);return Promise.resolve(e.request(t,{method:"DELETE"}))},function(r){throw new Error(r)}))}catch(r){return Promise.reject(r)}},n.patchGroup=function(r){var e=r.id,a=r.patch;try{var s=this;return Promise.resolve(o(function(){var r=new URL("/api/groups/"+e,s._baseURL);return Promise.resolve(s.request(r,{method:"PATCH",body:JSON.stringify(t({},a))},{"Content-Type":"application/json"}))},function(r){throw new Error(r)}))}catch(r){return Promise.reject(r)}},a}();export{n as BallChasingAPI};
//# sourceMappingURL=ballchasing.esm.js.map
